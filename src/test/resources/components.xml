<?xml version="1.0" encoding="UTF-8"?>
<beans>
  <bean id="AuthComponent"
     class="org.tamacat.httpd.examples.UserAuthComponent" singleton="false">
    <property name="username">
      <value>admin</value>
    </property>
    <property name="password">
      <value>pass</value>
    </property>
  </bean>
  
  <bean id="SingleSignOn" class="org.tamacat.httpd.auth.CookieBasedSingleSignOn" singleton="false">
    <property name="singleSignOnCookieName">
      <value>SingleSignOnUser</value>
    </property>
    <property name="freeAccessExtensions">
      <value>.jpg,.gif,.png</value>
    </property>
  </bean>
  
  <bean id="BasicAuthFilter"
     class="org.tamacat.httpd.auth.BasicAuthProcessor" singleton="false">
    <property name="authComponent">
      <ref bean="AuthComponent" />
    </property>
    <property name="singleSignOn">
      <ref bean="SingleSignOn" />
    </property>
    <property name="realm">
      <value>Basic Authentication area ${yyyyMMddHHmmssS}</value>
    </property>
    <property name="freeAccessExtensions">
      <value>.jpg,.gif,.png</value>
    </property>
  </bean>
  
  <bean id="DigestAuthFilter"
     class="org.tamacat.httpd.auth.DigestAuthProcessor" singleton="false">
    <property name="authComponent">
      <ref bean="AuthComponent" />
    </property>
  </bean>

  <bean id="WSSEAuthFilter"
     class="org.tamacat.httpd.auth.WSSEAuthProcessor" singleton="false">
    <property name="authComponent">
      <ref bean="AuthComponent" />
    </property>
  </bean>

  <bean id="FormAuthFilter"
     class="org.tamacat.httpd.auth.FormAuthProcessor" singleton="false">
    <property name="authComponent">
      <ref bean="AuthComponent" />
    </property>
    <property name="freeAccessExtensions">
      <value>.css,.js</value>
    </property>
  </bean>
  
  <bean id="SessionFilter" class="org.tamacat.httpd.filter.SessionCookieFilter" singleton="false">
    <property name="sessionCookieName">
      <value>tamacat-httpd-Session</value>
    </property>
  </bean>
  
  <bean id="AccessControlFilter"
     class="org.tamacat.httpd.examples.AccessControlFilter" singleton="false">
    <property name="cacheSize">
      <value>100</value>
    </property>
    <property name="cacheExpire">
      <value>5000</value>
    </property>
  </bean>
  
  <bean id="AccessLogFilter" class="org.tamacat.httpd.filter.AccessLogFilter" singleton="false" />
  
  <bean id="HeaderLoggingFilter" class="org.tamacat.httpd.filter.HeaderLoggingFilter" singleton="false" />
  
  <bean id="VelocityHandler" 
     class="org.tamacat.httpd.core.VelocityHttpHandler" singleton="false">
    <property name="docsRoot">
      <value>${server.home}/src/test/resources/htdocs</value>
    </property>
    <property name="httpFilter">
      <ref bean="AccessLogFilter" />
    </property>
    <property name="httpFilter">
      <ref bean="FormAuthFilter" />
    </property>
  </bean>
  
  <bean id="DefaultHandler"
     class="org.tamacat.httpd.core.LocalFileHttpHandler" singleton="false">
    <property name="httpFilter">
      <ref bean="AccessLogFilter" />
    </property>
  </bean>

  <bean id="DefaultHandler2"
     class="org.tamacat.httpd.core.LocalFileHttpHandler" singleton="false">
    <property name="docsRoot">
      <value>../htdocs/api/</value>
    </property>
    <property name="listings">
      <value>true</value>
    </property>
    <property name="httpFilter">
      <ref bean="AccessLogFilter" />
    </property>
  </bean>
  
  <bean id="DocsHandler"
     class="org.tamacat.httpd.core.LocalFileHttpHandler" singleton="false">
    <property name="docsRoot">
      <value>../htdocs/</value>
    </property>
    <property name="listings">
      <value>true</value>
    </property>
    <property name="httpFilter">
      <ref bean="AccessLogFilter" />
    </property>
  </bean>
  
  <bean id="ReverseHandler"
     class="org.tamacat.httpd.core.ReverseProxyHandler" singleton="false">
    <property name="httpFilter">
      <ref bean="AccessLogFilter" />
    </property>
    <property name="disabledKeepAlive">
      <value>false</value>
    </property>
    
    <property name="httpFilter">
      <ref bean="HeaderLoggingFilter" />
    </property>
    
    <!-- 
    <property name="httpFilter" >
      <ref bean="BasicAuthFilter" />
    </property>
    <property name="httpFilter">
      <ref bean="SessionFilter" />
    </property>
    <property name="httpFilter">
      <ref bean="AccessControlFilter" />
    </property>
    -->
    <property name="httpResponseInterceptor" mode="add">
      <ref bean="html" />
    </property>
  </bean>
  
  <bean id="html" class="org.tamacat.httpd.filter.HtmlLinkConvertInterceptor" singleton="false">
    <property name="contentType">
      <value>html</value>
    </property>
  </bean>
</beans>